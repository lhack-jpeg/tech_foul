<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../partials/head'); %>
</head>


<body class="container">
  <header><%- include('../partials/header'); %></header>
  <main class="main-container">
    <div class="col">
      <table class="row">
        <tbody>
          <%if (team_one.length>0){ %>
            <% team_one.forEach(function(row){ %>
              <tr>
                <td>NAME: <%= row.name %>
                </td>
              </tr>
              <tr>
                <td>TEAM_ID: <%= row.team_id %>
                </td>
              </tr>
              <tr>
                <td>RATING: <%= row.rating %>
                </td>
              </tr>
              <tr>
                <td>WINS: <%= row.wins %>
                </td>
              </tr>
              <tr>
                <td>LOSSES: <%= row.losses %>
                </td>
              </tr>
              <tr>
                <td>AVERAGE MATCH TIME: <%= row.avg_match_time %>
                </td>
              </tr>
              <tr>
                <td>AVERAGE SCORE: <%= row.avg_score %>
                </td>
              </tr>
              <tr>
                <td>FIRST BLOOD PERCENTAGE: <%= row.first_blood_pct %>
                </td>
              </tr>
              <tr>
                <td>PREVIOUS FORM: <%= row.prev_form %>
                </td>
              </tr>
              <tr>
                <td>ELO: <%= row.elo_win_pct %>
                </td>
              </tr>
              <% })}else{ %>
                <tr>
                  <td colspan="6">No Record Found</td>
                </tr>
                <% } %>
        </tbody>
      </table>
    </div>
    <div class="col">
      <table class="row">
        <tbody>
          <%if (team_two.length>0){ %>
            <% team_two.forEach(function(row){ %>
              <tr>
                <td>NAME: <%= row.name %>
                </td>
              </tr>
              <tr>
                <td>TEAM_ID: <%= row.team_id %>
                </td>
              </tr>
              <tr>
                <td>RATING: <%= row.rating %>
                </td>
              </tr>
              <tr>
                <td>WINS: <%= row.wins %>
                </td>
              </tr>
              <tr>
                <td>LOSSES: <%= row.losses %>
                </td>
              </tr>
              <tr>
                <td>AVERAGE MATCH TIME: <%= row.avg_match_time %>
                </td>
              </tr>
              <tr>
                <td>AVERAGE SCORE: <%= row.avg_score %>
                </td>
              </tr>
              <tr>
                <td>FIRST BLOOD PERCENTAGE: <%= row.first_blood_pct %>
                </td>
              </tr>
              <tr>
                <td>PREVIOUS FORM: <%= row.prev_form %>
                </td>
              </tr>
              <tr>
                <td>ELO: <%= row.elo_win_pct %>
                </td>
              </tr>
              <% })}else{ %>
                <tr>
                  <td colspan="6">No Record Found</td>
                </tr>
                <% } %>
        </tbody>
      </table>
    </div>
    <div>
      <canvas id="eloChart"></canvas>
    </div>
    <script>
      const teamOne = <%- JSON.stringify(team_one[0]) %>
      const teamTwo = <%- JSON.stringify(team_two[0]) %>
        async function postData(url = '') {
          const response = await fetch(url, {
            method: 'POST',
            mode: 'cors',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              'teamOne': teamOne,
              'teamTwo': teamTwo
            }),
          });
          return response.json();
        }

      const data = postData('http://localhost:4000/api');
      console.log({ data });
    </script>
    <script src="/javascript/eloChart.js">
    </script>
  </main>

  <footer><%- include('../partials/footer'); %></footer>
</body>

</html>